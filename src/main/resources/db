CREATE TABLE usuario (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nome VARCHAR2(100) NOT NULL,
    email VARCHAR2(150) NOT NULL UNIQUE,
    area_atuacao VARCHAR2(100) NOT NULL,
    pontos NUMBER
);

CREATE TABLE empresa (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nome VARCHAR2(100) NOT NULL,
    descricao CLOB
);

CREATE TABLE trilha (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nome VARCHAR2(100) NOT NULL,
    descricao CLOB,
    nivel VARCHAR2(20) NOT NULL,
    carga_horaria NUMBER NOT NULL,
    foco_trilha VARCHAR2(50) NOT NULL
);

CREATE TABLE competencias (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nome VARCHAR2(50) NOT NULL,
    categoria VARCHAR2(30) NOT NULL,
    descricao CLOB
);

CREATE TABLE competencias_trilha (
    id_trilha NUMBER NOT NULL,
    id_competencia NUMBER NOT NULL,

    PRIMARY KEY (id_trilha, id_competencia),

    FOREIGN KEY (id_trilha) REFERENCES trilha(id),
    FOREIGN KEY (id_competencia) REFERENCES competencias(id)
);

CREATE TABLE funcionarios_empresa (
    id_empresa NUMBER NOT NULL,
    id_usuario NUMBER NOT NULL,
    cargo VARCHAR2(50) NOT NULL,

    PRIMARY KEY (id_empresa, id_usuario),

    FOREIGN KEY (id_empresa) REFERENCES empresa(id),
    FOREIGN KEY (id_usuario) REFERENCES usuario(id)
);

CREATE TABLE matricula (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    id_usuario NUMBER NOT NULL,
    id_trilha NUMBER NOT NULL,
    data_inscricao DATE NOT NULL,

    FOREIGN KEY (id_usuario) REFERENCES usuario(id),
    FOREIGN KEY (id_trilha) REFERENCES trilha(id)
);